#!/usr/bin/env python3
"""
Canvas Student MCP Server Entry Point
Python 3.9 Compatible Version
"""

import os
import sys
import asyncio
import warnings
from dotenv import load_dotenv

# Suppress urllib3 SSL warnings that interfere with JSON-RPC
warnings.filterwarnings("ignore", message="urllib3 v2 only supports OpenSSL 1.1.1+")
warnings.filterwarnings("ignore", category=DeprecationWarning)

# Load environment variables
load_dotenv()

# Add src to path for imports
sys.path.append(os.path.join(os.path.dirname(__file__), 'src'))

from mcp_server.stdio_mcp import StdioMCPServer

def main():
    """Main entry point for the MCP server"""
    try:
        # Initialize and run the stdio MCP server
        mcp_server = CanvasStudentMCP()
        # Don't output startup message to avoid JSON parsing issues
        mcp_server.run()
    except KeyboardInterrupt:
        print("\nüëã Canvas Student MCP Server stopped", file=sys.stderr)
    except Exception as e:
        print(f"‚ùå Error starting MCP server: {e}", file=sys.stderr)
        sys.exit(1)

if __name__ == "__main__":
    main()
